(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{8871:function(e,t,s){Promise.resolve().then(s.bind(s,9309))},9782:function(e,t,s){"use strict";s.d(t,{Fs:function(){return i},tO:function(){return o}});var a=s(994),l=s(2307),r=s(9584);let n=(0,a.ZF)({apiKey:"AIzaSyBXlb5oSgzDm-ywBdu6E1OFBrNCIGEsPJc",authDomain:"taylor-made-referral-app.firebaseapp.com",databaseURL:"https://taylor-made-referral-app-default-rtdb.firebaseio.com",projectId:"taylor-made-referral-app",storageBucket:"taylor-made-referral-app.appspot.com",messagingSenderId:"704463799241",appId:"1:704463799241:web:c60d98964a1045c4555e18",measurementId:"G-H8NYFZH8WW"}),i=(0,l.N8)(n),o=(0,r.cF)(n,"gs://taylor-made-referral-app.appspot.com")},9309:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(7437),l=s(2265),r=s(9782),n=s(2307),i=s(4220),o=s(338);function c(e){let{selector:t=""}=e;return(0,a.jsx)("div",{className:"".concat(t," absolute top-0 left-0 z-50 max-w-full w-full min-h-screen h-screen bg-opacity-50 bg-black"),children:(0,a.jsx)("div",{className:"flex justify-center items-center min-h-full pt-4",children:(0,a.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-solid border-slate-400 border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",role:"status",children:(0,a.jsx)("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})})})})}function m(e){let{params:t}=e,[s,m]=(0,l.useState)({}),[f,d]=(0,l.useState)([]),[x,u]=(0,l.useState)(0),[h,N]=(0,l.useState)(0),[p,b]=(0,l.useState)([]),[j,w]=(0,l.useState)(!1),[v,g]=(0,l.useState)(""),[y,S]=(0,l.useState)(""),[E,O]=(0,l.useState)({email:"",userName:"",firstName:"",lastName:"",earnedPoints:0,redeemedPoints:0,referredUsers:[]});return(0,l.useEffect)(()=>{if(""!==y&&null!=y){w(!0);let e=(0,n.iH)(r.Fs,"Referencers"),t=(0,n.IO)(e,(0,n.g2)("email"),(0,n.EW)(y),(0,n.Kk)(1));(0,n.U2)(t).then(e=>{if(e.exists()){console.log(e.val());let t=e.val(),s=Object.keys(t);O({...E,userName:E.firstName+" "+E.lastName,firstName:E.firstName,lastName:E.lastName,email:E.email,earnedPoints:t[s.toString()].earnedPoints,redeemedPoints:t[s.toString()].redeemedPoints})}else console.log("No data available")}).catch(e=>{console.error(e)});let s=(0,n.iH)(r.Fs,"Referrals"),a=(0,n.IO)(s,(0,n.g2)("referrerEmail"),(0,n.EW)(y));(0,n.U2)(a).then(e=>{if(e.exists()){let t=e.val(),s=[];for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(console.log(t[e]),s[e]={email:t[e].referredEmail,status:t[e].status});m(s),w(!1)}else{let e=(0,n.iH)(r.Fs,"TmUsers"),t=(0,n.IO)(e,(0,n.g2)("email"),(0,n.EW)(y),(0,n.Kk)(1));(0,n.U2)(t).then(e=>{if(e.exists()){let t=e.val(),s=Object.keys(t)[0],a=t[s];O({...E,userName:a.first_name+" "+a.last_name,firstName:a.first_name,lastName:a.last_name,email:a.email})}else console.log("No data available")}).catch(e=>{console.error(e)}),w(!1)}}).catch(e=>{console.error(e),w(!1)})}},[y]),(0,l.useEffect)(()=>{d(Object.values(s))},[s]),(0,l.useEffect)(()=>{u(x)},[x]),(0,l.useEffect)(()=>{N(h)},[E]),(0,l.useEffect)(()=>{t.id&&(g(t.id),fetch("/api/tm/user/".concat(t.id),{method:"GET"}).then(e=>e.text()).then(e=>{let t=JSON.parse(e).user;S(t.email);let s=(0,n.iH)(r.Fs,"Referencers"),a=(0,n.IO)(s,(0,n.g2)("email"),(0,n.EW)(t.email));(0,n.U2)(a).then(e=>{if(e.exists()){let s=e.val(),a=Object.keys(s);O({...E,userName:t.first_name+" "+t.last_name,firstName:t.first_name,lastName:t.last_name,email:t.email,earnedPoints:s[a.toString()].earnedPoints,redeemedPoints:s[a.toString()].redeemedPoints})}else console.log("No data available")}).catch(e=>{console.error(e)})}).catch(e=>console.log("error",e)))},[t.id]),(0,a.jsxs)("div",{className:"flex min-h-screen flex-col items-center pb-36 p-0",children:[(0,a.jsx)(i.Z,{title:"TaylorMade Golf",subtitle:"Referral Program"}),(0,a.jsxs)("div",{className:"max-w-2xl w-full px-6 md:px-0",children:[(0,a.jsx)(o.Z,{text:"Referral Dashboard"}),(0,a.jsx)("div",{className:"max-w-2xl w-full items-center justify-between font-mono text-sm lg:flex mt-6",children:(0,a.jsxs)("div",{className:"flex w-full",children:[(0,a.jsx)("div",{className:"flex-auto w-70",children:"User Name"}),(0,a.jsxs)("div",{className:"flex-auto w-30 font-bold font-mono text-right",children:[E.firstName," ",E.lastName]})]})}),(0,a.jsx)("div",{className:"max-w-2xl w-full items-center justify-between font-mono text-sm lg:flex mt-6",children:(0,a.jsxs)("div",{className:"flex w-full",children:[(0,a.jsx)("div",{className:"flex-auto w-70",children:"Total Referral Points Earned"}),(0,a.jsx)("div",{className:"flex-auto w-30 font-bold font-mono text-right",children:E.earnedPoints})]})}),(0,a.jsx)("div",{className:"max-w-2xl w-full items-center justify-between font-mono text-sm lg:flex mt-6",children:(0,a.jsxs)("div",{className:"flex w-full",children:[(0,a.jsx)("div",{className:"flex-auto w-70",children:"Total Referral Points Redeemed"}),(0,a.jsx)("div",{className:"flex-auto w-30 font-bold font-mono text-right",children:E.redeemedPoints})]})})]}),(0,a.jsxs)("div",{className:"relative max-w-2xl w-full pb-16 px-6 md:px-0",children:[(0,a.jsx)(o.Z,{text:"Referred Users"}),(0,a.jsxs)("ul",{className:"referrals-list min-w-100 min-h-20 block",children:[j?(0,a.jsx)(c,{}):null,f.map((e,t)=>(0,a.jsxs)("li",{className:"flex align-items-center text-left w-full mt-6",children:[(0,a.jsx)("div",{className:"flex-auto w-70",children:String(e.email)}),(0,a.jsx)("div",{className:"flex-auto w-30 font-bold font-mono text-right",children:String(e.status)})]},t))]}),0!==Object.keys(s).length||j?null:(0,a.jsx)("p",{className:"text-center mt-6",children:"No referred users found"})]})]})}},4220:function(e,t,s){"use strict";var a=s(7437),l=s(2265),r=s(6560),n=s.n(r),i=s(9584),o=s(9782);t.Z=e=>{let{title:t="",subtitle:s="",fontSize:r=1,layoutType:c="col",image:m=""}=e,[f,d]=(0,l.useState)();(0,l.useEffect)(()=>{if(""!==m){let e=(0,i.iH)(o.tO,m);(0,i.Jt)(e).then(e=>{console.log(e),d(e)}).catch(e=>{console.log(e)})}},[m]);let x={col:"flex-col",row:"flex-row"};return Object.keys(x).find(e=>x[e]===c),(0,a.jsxs)("div",{className:"relative block hero-banner overflow-hidden bg-cover bg-center ".concat(x[c]," w-full justify-center px-3 md:px-0 py-10 md:py-16 mb-4 md:mb-10"),children:[f&&(0,a.jsx)("img",{src:f,alt:"hero banner",className:"absolute w-full h-full top-0 left-0 z-0"}),(0,a.jsx)("h1",{className:"".concat(n().className," flex-1 text-center z-10 text-").concat(1+r,"xl sm:text-").concat(2+r,"xl md:text-").concat(3+r,"xl"),children:t}),""!==s&&(0,a.jsx)("h1",{className:"".concat(n().className," flex-1 text-center z-10 text-").concat(1+r,"xl sm:text-").concat(2+r,"xl md:text-").concat(3+r,"xl"),children:s})]})}},338:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(7437);s(2265);var l=s(6560),r=s.n(l);function n(e){let{text:t=""}=e;return(0,a.jsx)("div",{className:"form-header max-w-2xl w-full items-center justify-between font-mono text-sm lg:flex mt-6 pb-3",children:(0,a.jsx)("h5",{className:"".concat(r().className),children:t})})}}},function(e){e.O(0,[481,535,971,938,744],function(){return e(e.s=8871)}),_N_E=e.O()}]);